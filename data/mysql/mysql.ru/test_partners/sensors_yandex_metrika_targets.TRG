TYPE=TRIGGERS
triggers='CREATE DEFINER=`root`@`localhost` TRIGGER `test_partners`.`sensors_yandex_metrika_targets_add` AFTER INSERT ON `test_partners`.`sensors_yandex_metrika_targets`\nFOR EACH ROW BEGIN\n\nINSERT INTO `test_partners_changes`.`sensors_yandex_metrika_targets_changes`(`sensors_yandex_metrika_targets_id`, `field`, `old_value`, `new_value`, `who`, `when`, `mysql_user`)\nVALUES (NEW.sensors_yandex_metrika_targets_id, \'g_partners_1_id\', \'INSERT\', NEW.g_partners_1_id, @auth_login, NOW(), USER()),\n(NEW.sensors_yandex_metrika_targets_id, \'yandex_goal_name\', \'INSERT\', NEW.yandex_goal_name, @auth_login, NOW(), USER()),\n(NEW.sensors_yandex_metrika_targets_id, \'yandex_goal_id\', \'INSERT\', NEW.yandex_goal_id, @auth_login, NOW(), USER()),\n(NEW.sensors_yandex_metrika_targets_id, \'stage\', \'INSERT\', NEW.stage, @auth_login, NOW(), USER());\n\nEND' 'CREATE DEFINER=`root`@`localhost` TRIGGER `test_partners`.`sensors_yandex_metrika_targets_update` AFTER UPDATE ON `test_partners`.`sensors_yandex_metrika_targets`\nFOR EACH ROW BEGIN\n\nIF NOT OLD.g_partners_1_id <=> NEW.g_partners_1_id THEN\n    INSERT INTO `test_partners_changes`.`sensors_yandex_metrika_targets_changes`(`sensors_yandex_metrika_targets_id`, `field`, `old_value`, `new_value`, `who`, `when`, `mysql_user`)\n    VALUES(NEW.sensors_yandex_metrika_targets_id, \'g_partners_1_id\', OLD.g_partners_1_id, NEW.g_partners_1_id, @auth_login, NOW(), USER());\nEND IF;\n\nIF NOT OLD.yandex_goal_name <=> NEW.yandex_goal_name THEN\n    INSERT INTO `test_partners_changes`.`sensors_yandex_metrika_targets_changes`(`sensors_yandex_metrika_targets_id`, `field`, `old_value`, `new_value`, `who`, `when`, `mysql_user`)\n    VALUES(NEW.sensors_yandex_metrika_targets_id, \'yandex_goal_name\', OLD.yandex_goal_name, NEW.yandex_goal_name, @auth_login, NOW(), USER());\nEND IF;\n\nIF NOT OLD.yandex_goal_id <=> NEW.yandex_goal_id THEN\n    INSERT INTO `test_partners_changes`.`sensors_yandex_metrika_targets_changes`(`sensors_yandex_metrika_targets_id`, `field`, `old_value`, `new_value`, `who`, `when`, `mysql_user`)\n    VALUES(NEW.sensors_yandex_metrika_targets_id, \'yandex_goal_id\', OLD.yandex_goal_id, NEW.yandex_goal_id, @auth_login, NOW(), USER());\nEND IF;\n\nIF NOT OLD.stage <=> NEW.stage THEN\n    INSERT INTO `test_partners_changes`.`sensors_yandex_metrika_targets_changes`(`sensors_yandex_metrika_targets_id`, `field`, `old_value`, `new_value`, `who`, `when`, `mysql_user`)\n    VALUES(NEW.sensors_yandex_metrika_targets_id, \'stage\', OLD.stage, NEW.stage, @auth_login, NOW(), USER());\nEND IF;\n\nEND' 'CREATE DEFINER=`root`@`localhost` TRIGGER `test_partners`.`sensors_yandex_metrika_targets_del` AFTER DELETE ON `test_partners`.`sensors_yandex_metrika_targets`\nFOR EACH ROW BEGIN\n\nINSERT INTO `test_partners_changes`.`sensors_yandex_metrika_targets_changes`(`sensors_yandex_metrika_targets_id`, `field`, `old_value`, `new_value`, `who`, `when`, `mysql_user`)\nVALUES(OLD.sensors_yandex_metrika_targets_id, \'DELETE\', \'\', \'\', @auth_login, NOW(), USER());\n\nEND'
sql_modes=1342177280 1342177280 1342177280
definers='root@localhost' 'root@localhost' 'root@localhost'
client_cs_names='utf8' 'utf8' 'utf8'
connection_cl_names='utf8_general_ci' 'utf8_general_ci' 'utf8_general_ci'
db_cl_names='utf8_general_ci' 'utf8_general_ci' 'utf8_general_ci'
created=153375877662 153375877664 153375877665
